{% extends 'base.html' %}
{% load static %}
{% load bootstrap_tags %}

{% block main %}
    <form action="" method="post">
        {% csrf_token %}
        {{ form|as_bootstrap }}
        <table class="table-responsive">
            <tr>
                <th>序号</th>
                <th>编号</th>
                <th>形态</th>
                <th>起始地</th>
                <th>目的地</th>
                <th>数量</th>
                <th>单位</th>
                <th>金额</th>
                <th>日期</th>
                <th>备注</th>
            </tr>
            <tbody>
            {{ formset.management_form }}
            {% for form in formset %}
                {#                {{ form }}#}
                {#            {% endfor %}#}


                <tr>
                    <td>{{ form.line_num }}</td>
                    <td>{{ form.block_num }}</td>
                    <td>{{ form.block_type }}</td>
                    <td>{{ form.be_from }}</td>
                    <td>{{ form.destination }}</td>
                    <td>{{ form.quantity }}</td>
                    <td>{{ form.unit }}</td>
                    <td>{{ form.amount }}</td>
                    <td>{{ form.date }}</td>
                    <td>{{ form.ps }}</td>
                </tr>

            {% endfor %}</tbody>
        </table>
        <datalist id="block_num" v-for="block in block_list">
            <option ></option>

        </datalist>
        <input type="submit" class="btn btn-primary" value="提交">
    </form>
    <script type="text/javascript">
        function selectOnchang(obj) {
            //获取被选中的option标签选项
            a = obj.id.split('-',2)
            var y = $('#'+a.join('-')+'-line_num')
            y.val((parseInt(y.val())+1))
        },
    var block_list = new Vue({
        el:'#block_num',
        data:{
            'block_list':[]
        }
    })
    </script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
{% endblock %}
